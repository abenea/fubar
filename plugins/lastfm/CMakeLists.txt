project(lastfm)

find_package(LibLastFm REQUIRED)
find_package(Qt4 4.5 REQUIRED QtCore QtXml QtNetwork)
SET(LASTFMPLUGIN_HEADERS lastfmplugin.h)
SET(LASTFMPLUGIN_SOURCES lastfmplugin.cpp)

INCLUDE(${QT_USE_FILE})
SET(QT_USE_QTPLUGIN TRUE)

include_directories(${LIBLASTFM_INCLUDE_DIR} ${LIBLASTFM_INCLUDE_DIR}/..)
QT4_AUTOMOC(${LASTFMPLUGIN_SOURCES})
QT4_WRAP_CPP(LASTFMPLUGIN_MOC ${LASTFMPLUGIN_HEADERS})

add_library(lastfm SHARED ${LASTFMPLUGIN_HEADERS} ${LASTFMPLUGIN_SOURCES} ${LASTFMPLUGIN_MOC})
target_link_libraries(lastfm ${QT_LIBRARIES} ${LIBLASTFM_LIBRARY})
# #file(COPY ${CMAKE_CURRENT_BINARY_DIR}/../../lib/liblastfm.so DESTINATION ${CMAKE_CURRENT_BINARY_DIR}/..)
